# ã“ã®workflowã¯ auto-merge-approved-pr.yml ã«çµ±åˆã•ã‚Œã¾ã—ãŸ
# é‡è¤‡ã‚’é¿ã‘ã‚‹ãŸã‚ç„¡åŠ¹åŒ–

# name: Cleanup Merged Branches
# 
# on:
#   pull_request:
#     types: [closed]
# 
# jobs:
#   cleanup:
#     if: github.event.pull_request.merged == true
#     runs-on: ubuntu-latest
#     permissions:
#       content: write
#     
#     steps:
#       - name: Delete merged branch
#         run: |
#           BRANCH_NAME="${{ github.event.pull_request.head.ref }}"
#           REPO_OWNER="${{ github.repository_owner }}"
#           REPO_NAME="${{ github.event.repository.name }}"
#           
#           echo "ğŸ” PR #${{ github.event.pull_request.number }} was merged"
#           echo "ğŸŒ¿ Branch to delete: $BRANCH_NAME"
#           
#           # ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒï¼ˆmain, masterï¼‰ã¯å‰Šé™¤ã—ãªã„
#           if [[ "$BRANCH_NAME" == "main" || "$BRANCH_NAME" == "master" ]]; then
#             echo "âš ï¸  Skipping deletion of main branch: $BRANCH_NAME"
#             exit 0
#           fi
#           
#           # developãƒ–ãƒ©ãƒ³ãƒã‚‚å‰Šé™¤ã—ãªã„
#           if [[ "$BRANCH_NAME" == "develop" ]]; then
#             echo "âš ï¸  Skipping deletion of develop branch: $BRANCH_NAME"
#             exit 0
#           fi
#           
#           # ãƒªãƒ¢ãƒ¼ãƒˆãƒ–ãƒ©ãƒ³ãƒã‚’å‰Šé™¤
#           echo "ğŸ—‘ï¸  Deleting remote branch: $BRANCH_NAME"
#           gh api \
#             --method DELETE \
#             /repos/$REPO_OWNER/$REPO_NAME/git/refs/heads/$BRANCH_NAME || {
#             echo "âŒ Failed to delete branch $BRANCH_NAME (may already be deleted)"
#             exit 0
#           }
#           
#           echo "âœ… Successfully deleted branch: $BRANCH_NAME"
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}